@inject Services Services
@inject BaseAppState AppState

@if (initialLoad)
{
    <MudProgressCircular Color="Color.Primary" Indeterminate="true" />
}
else if(!initialLoad && AppState.User?.Citizenships.Count == 0)
{
    <MudText Typo="Typo.h6" Align="Align.Center" Class="mb-5">@AppState.Translate(ResourceKeys.YouHaveNoCommunities)</MudText>
    <div>
        <MudLink Href="@FrontEndPages.JoinCommunity">@AppState.Translate(ResourceKeys.JoinCommunity)</MudLink>
    </div>
    <div>
        <MudLink Href="@FrontEndPages.RegisterCommunity">@AppState.Translate(ResourceKeys.RegisterCommunity)</MudLink>
    </div>
}
else
{
    <MudText Typo="Typo.h3" Align="Align.Center" Class="mb-5">Communities</MudText>
    <MudGrid>
       @*  @foreach (var community in AppState.User.Citizenships)
        {
            <MudItem Class="mb-5">
                <MudCard Elevation="25" Outlined="true" Class="pa-4" Style="width: 300px;">
                    <MudGrid>
                        <MudItem>
                            <MudAvatar>
                                <MudImage Src="@community.ProfilePicture" />
                            </MudAvatar>
                        </MudItem>
                        <MudItem>
                            <MudText Typo="Typo.h6">@community.Name</MudText>
                            <MudText Typo="Typo.body2">@community.Description</MudText>
                        </MudItem>
                    </MudGrid>
                </MudCard>
            </MudItem>
        } *@
    </MudGrid>
}

    @code {
    private bool initialLoad = true;

    protected override void OnInitialized()
    {
        base.OnInitialized();
        //make get request to get all communities

        //after getting response, set initialLoad to false
        initialLoad = false;
    }

}
